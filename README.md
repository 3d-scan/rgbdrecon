# rgbdrecon
This code adds an RGB-D data reader interface into the [Voxel-hashing](https://github.com/niessner/VoxelHashing) code, one of the famous Real-time RGBD Reconstruction platform. The code can take local RGB-D data as input such as [TUM RGB-D dataset](https://vision.in.tum.de/data/datasets/rgbd-dataset).

In this readme file, we use 
A - zParametersDefault.txt
B - zParametersCameraPoseOpt.txt

1. To use depth sensor, note for these parameters:

1) s_sensorIdx = corresponding value in A;

2) s_bReadRGBData = false in B;

2. To use RGBD data from local file

Note for these parameters in A:

1) s_adapterWidth, s_adapterHeight. 

These two parameters are the adapter resolution (the final resolution of the RGBD data used during reconstruction). An advice is to the same as the resolution of the input RGBD images to avoid the re-sample process in the code.

Note for these important parameters in B:

1) s_bReadRGBData = true;

2) s_uDepthScaleFactor. 
Normally it is 5000 for the common RGBD data including TUM, ICL-NUIM and self-scanned data.

3) s_uRGBDataType.
RGBD data type. Even though the RGBD data use the same format of RGB and depth images, we have a correction for the ICL-NUIM original trajectories since it is originally generated by a negative fy = -480.0, which will result in a inverse-y-coordinate upside-down model after reconstruction. So to generate a normal model, we made some correction on each trajectory in the code to enable the consistency. See the comments in B for details.

4) s_fx, s_fy, s_cx, s_cy. 
The camera calibration matrix parameters.

5) s_strDataPath, s_strTrajFile, s_strAssociationFile.
RGBD data path.

6) s_depthWidth, s_depthHeight, s_colorWidth, s_colorHeight
RGBD image resolution.
